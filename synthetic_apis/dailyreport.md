# Synthetic API: Daily Report

The `dailyreport` is a **time-series state variable**, typically updated from data stream messages to `daily_report_entry` generated by bots.

#### Daily Report Section ID's
```
com.ppc.BotProprietary/signals/dailyreport.py

# Section ID's
SECTION_ID_ALERTS = "alerts"
SECTION_ID_NOTES = "notes"
SECTION_ID_TASKS = "tasks"
SECTION_ID_SLEEP = "sleep"
SECTION_ID_ACTIVITIES = "activities"
SECTION_ID_MEALS = "meals"
SECTION_ID_MEDICATION = "medication"
SECTION_ID_BATHROOM = "bathroom"
SECTION_ID_SOCIAL = "social"
SECTION_ID_MEMORIES = "memories"
SECTION_ID_SYSTEM = "system"
```

## Inputs

Data Stream Address : `daily_report_entry`

#### Properties
| Property | Type | Description |
| -------- | ---- | ----------- |
| section_id | String | See the Section ID values above |
| comment | Comment for this entry into the daily report |
| subtitle | String | Optional subtitle for the section header summarizing the knowledge from all the entries |
| identifier | String | Optional identifier to come back and edit this entry later |
| include_timestamp | Boolean | True to include a timestamp in the `timestamp_str` |
| timestamp_override_ms | int | Optional timestamp in milliseconds to override the current time when citing the timestamp with include_timestamp=True |

#### Content
Example data stream content to create an entry into the daily report
```
{
    "section_id": section_id,
    "comment": comment,
    "subtitle": subtitle,
    "identifier": identifier,
    "include_timestamp": include_timestamp,
    "timestamp_override_ms": timestamp_override_ms
}
```

## Outputs

Time-series State Variable : `dailyreport`


#### Properties
| Property | Type | Description |
| -------- | ---- | ----------- |
| title | String | Title of the daily report |
| subtitle | String | Description of this daily report |
| created_ms | int | Creation timestamp in milliseconds |
| sections | List | List of sections to the daily report, each with a list of items. |
| {section}.weight | int | Weight of this section, allowing the bot to pre-sort sections before saving the state variable so the app does not have to do this work. |
| {section}.id | String | Section ID of the state variable |
| {section}.title | String | Title of this section |
| {section}.subtitle | String | Optional sub-title of this section |
| {section}.icon | String | Recommended icon for this section |
| {section}.icon_font | String | Icon font for that icon |
| {section}.color | String | Recommended color for this section. |
| {section}.items | List | List of items that happened, pre-sorted by weight or timestamp_ms |
| {item}.id | String | Ignore. Internally used identifier for this entry, to edit or remove it later |
| {item}.timestamp_ms | int | Timestamp in milliseconds of this entry |
| {item}.comment | String | Description of what happened at this time with the optional time description included at the beginning. This was the original daily report entry design, and is left here for backwards compatibility. |
| {item}.timestamp_str | String | Human-readable timestamp. Sleep timestamps will include the day of the week (to know if the entry was for this morning or last night), and other timestamps do not (implying it happened today). |
| {item}.comment_raw | String | Raw comment without a timestamp |
| {item}.weight | int | Optional weight for this comment for the bots to pre-sort items |

#### Content
```
{
  "title": "ILENE JOHNSON",
  "subtitle": "Daily Report for Wednesday November 20, 2019 - In Progress",
  "created_ms": creation_timestamp_in_milliseconds,
  "sections": [
    {
      "weight": 0,
      "id": "notes",
      "title": "Today's Notes",
      "subtitle": none,
      "icon": "some_icon",
      "color": "B6B038",
      "items": [
        {
          "timestamp_ms": timestamp,
          "comment": "2:27 AM - Presence Family says: 'Fall detection learning is complete.'",
          "timestamp_str": "2:27 AM",
          "comment_raw": "Presence Family says: 'Fall detection learning is complete.'"
        },
        {
          "timestamp_ms": timestamp,
          "comment": "2:15 PM - Mike Moss says: 'Dishwasher repair person finally came today.'",
          "timestamp_str": "2:15 PM",
          "comment_raw": "Mike Moss says: 'Dishwasher repair person finally came today.'"
        }
      ]
    },
    {
      "weight": 1,
      "id": "tasks",
      "title": "Today's Tasks",
      "subtitle": none,
      "icon": "some_icon",
      "color": "B6B038",
      "items": [
        {
          "timestamp_ms": timestamp
          "id": "some_internal_bot_id",
          "weight": 0,
          "comment": "2:15 PM - Mike Moss completed a task: 'Fix Dishwasher.'",
          "timestamp_str": "2:15 PM",
          "comment_raw": "Mike Moss completed a task: 'Fix Dishwasher.'"
        },
        {
          "timestamp_ms": timestamp
          "id": "This is an example without a timestamp included in the comment",
          "weight": 1,
          "comment": "Jeanne Moss will take on a new task: 'Organize donation items for Goodwill.'",
          "comment_raw": "Jeanne Moss will take on a new task: 'Organize donation items for Goodwill.'",
          "timestamp_str": None
        }
      ]
    },
    {
      "weight": 2,
      "id": "sleep",
      "title": "Sleep",
      "subtitle": "Summary: Consistent sleep schedule and good quality sleep last night.",
      "icon": "some_icon",
      "color": "B6B038",
      "items": [
        {
          "timestamp_ms": timestamp
          "id": "some_internal_bot_id",
          "weight": 0,
          "comment": "9:41 PM Tuesday - Went to sleep.",
          "comment_raw": "Went to sleep.",
          "timestamp_str": "9:41 PM Tuesday"
        },
        {
          "timestamp_ms": timestamp
          "id": "some_internal_bot_id",
          "weight": 1,
          "comment": "5:59 AM Wednesday - Woke up",
          "comment_raw": "Woke up",
          "timestamp_str": "5:59 AM Wednesday"
        },
        {
          "timestamp_ms": timestamp
          "id": "some_internal_bot_id",
          "weight": 2,
          "comment": "8.0 hours of sleep.",
          "comment_raw": "8.0 hours of sleep."
        }
      ]
    }
  ]
}
```

## References
* `com.ppc.BotProprietary/signals/dailyreport.py`
* `com.ppc.Microservices/intelligence/dailyreport/location_dailyreport_microservice.py`
